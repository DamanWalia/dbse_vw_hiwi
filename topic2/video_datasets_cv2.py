# -*- coding: utf-8 -*-
"""Video_Datasets_CV2.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/169nH62OTMkxktEddMHpRL5sxvLEgJntF
"""

import cv2
import numpy as np
import glob
import os
from timeit import default_timer as timer

from google.colab import drive
drive.mount('/content/drive')

from google.colab import drive 
drive.mount('/content/drive')

# Commented out IPython magic to ensure Python compatibility.
# %cd /content/drive/My\ Drive/

!pwd

start = timer()
frameSize = (1920, 1208)

out = cv2.VideoWriter(r'/cam_front_center/project.avi',cv2.VideoWriter_fourcc(*'DIVX'), 60, frameSize)
#out = cv2.VideoWriter(r'C:\Users\priya\OneDrive\Desktop\output_video_HFYU.mp4',cv2.VideoWriter_fourcc(*'HFYU'), 60, frameSize)
#out = cv2.VideoWriter(r'C:\Users\priya\OneDrive\Desktop\output_video_default.avi',cv2.VideoWriter_fourcc(), 60, frameSize)

for filename in glob.glob('/cam_front_center/*.png'):
    img = cv2.imread(filename)
    out.write(img)

out.release()
end = timer()
print(end - start)

img_array = []
for filename in glob.glob('/cam_front_center/*.png'):
    img = cv2.imread(filename)
    height, width, layers = img.shape
    size = (width,height)
    img_array.append(img)

    out = cv2.VideoWriter('/cam_front_center/project.avi',cv2.VideoWriter_fourcc(*'DIVX'), 15,size)
    for i in range(len(img_array)):
      out.write(img_array[i])
      out.release()

# Opens the Video file
cap= cv2.VideoCapture('/cam_front_center/project.avi')
i=0
while(cap.isOpened()):
    ret, frame = cap.read()
    if ret == False:
        break
    cv2.imwrite('kang'+str(i)+'.png',frame)
    i+=1
 
cap.release()
cv2.destroyAllWindows()

